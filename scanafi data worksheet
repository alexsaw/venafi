{
"name":"ALex's CLI Service",
"environmentId":"f1351720-658b-11eb-9bbd-338917ba2e36",
"edgeInstancesIds":[],
"serviceType":"BASIC_DISCOVERY",
"workTypes":["DISCOVER"],
"targets":{
	"serviceType":"BASIC_DISCOVERY",
	"ipRanges":["192.168.100.1","192.168.1.1"],
	"fqdns":[],
	"ports":["443"]
	}
}


https://api.venafi.cloud/v1/integrationservices POST





response

{"id":"77aef810-cc9d-11ec-83d1-d37323490121",
"companyId":"b5ed6d60-22c4-11e7-ac27-035f0608fd2c",
"environmentId":"f1351720-658b-11eb-9bbd-338917ba2e36",
"edgeInstancesIds":[],
"name":"ALex's CLI Service",
"status":"DRAFT",
"workTypes":["DISCOVER"],
"serviceType":"BASIC_DISCOVERY",
"schedulerEnabled":false,
"operationsCount":0,
"systemGenerated":false,
"targets":{"serviceType":"BASIC_DISCOVERY","ipRanges":["192.168.1.1","192.168.100.1"],"fqdns":[],"ports":["443"]}}




download and unzip
curl -O https://dl.venafi.cloud/new/scanafi_linux_64.tgz && tar zxvf scanafi_linux_64.tgz


run scanafi
./scanafi --config_uri https://api.venafi.cloud/v1/scanaficonfiguration/77aef810-cc9d-11ec-83d1-d37323490121 --api_key 27b20743-2ddc-418d-8c84-0b3fb2ff066a





{"expression":
{"operator":"AND",
"operands":[{"operator":"AND","operands":[{"operator":"OR",
"operands":[{"field":"certificateStatus","operator":"EQ","value":"ACTIVE"}]}]},
{"operator":"OR","operands":[{"field":"certificateStatus","operator":"EQ","value":"ACTIVE"}]},
{"operator":"OR","operands":[{"field":"extendedKeyUsage","values":["1.3.6.1.5.5.7.3.1"],"operator":"MATCH"}]},
{"operator":"OR","operands":[{"field":"issuerCN","values":["Amazon"],"operator":"MATCH"}]}]},
"ordering":{"orders":[{"direction":"DESC","field":"certificatInstanceModificationDate"}]},
"paging":{"pageNumber":0,"pageSize":50}}



